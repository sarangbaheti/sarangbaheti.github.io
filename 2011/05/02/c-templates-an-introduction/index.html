<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>C&#43;&#43; Templates – An Introduction</title>

  <meta name="author" content="Sarang Baheti" />
  
  

  <meta name="generator" content="Hugo 0.30.2" />

  <link rel="alternate" href="https://www.variadic.xyz/index.xml" type="application/rss+xml" title="a few notes">

  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://www.variadic.xyz/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://www.variadic.xyz/css/main.css" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/default.min.css">
  
  
  
  <meta property="og:title" content="C&#43;&#43; Templates – An Introduction" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/2011/05/02/c-templates-an-introduction//" />
  <meta property="og:image" content="" />
  
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.variadic.xyz/">a few notes</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
          <a title="Notes" href="/">Notes</a>
  	      </li>
  	    
      
        
          <li>
          <a title="About" href="/about/">About</a>
  	      </li>
  	    
      
        
          <li>
          <a title="Archive" href="/archive/">Archive</a>
  	      </li>
  	    
      
        
          <li>
          <a title="Books" href="/books/">Books</a>
  	      </li>
  	    
      
        
          <li>
          <a title="Disclaimer" href="/disclaimer/">Disclaimer</a>
  	      </li>
  	    
      
      </ul>
    </div>

	<div class="avatar-container">
	  <div class="avatar-img-border">
      
	  </div>
	</div>

  </div>
</nav>


    <div role="main" class="container main-content">

      
        





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>C&#43;&#43; Templates – An Introduction</h1>
      
      
      
      <span class="post-meta">Posted on May 2, 2011</span>
      
        </div>
      </div>
    </div>
  </div>
</div>
</header>




<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
          

<h2 id="why-we-need-templates">Why we need Templates?</h2>

<p>Suppose we are writing a function to compare the values of two variables and return the one with greater value, the function would look like this (for an int):</p>

<pre><code class="language-cpp">int max(int a, int b)
{
    return a &amp;gt; b ? a : b;
}
</code></pre>

<p>what if we would like to support <code>double</code>, <code>long int</code>, <code>char</code>, <code>unsigned int</code>?</p>

<p>More code</p>

<pre><code class="language-cpp">double max( double a, double b)
{
    return a &amp;gt; b ? a : b;
}

float max( float a, float b)
{
    return a &amp;gt; b ? a : b;
}

char max( char a, char b)
{
    return a &amp;gt; b ? a : b;
}

unsigned int max( unsigned int a, unsigned int b)
{
    return a &amp;gt; b ? a : b;
}

long max( long a, long b)
{
    return a &amp;gt; b ? a : b;
}
</code></pre>

<p>hmmm, works like a charm. But you have to write definitions (overload) if you want more types to be supported. It gets ugly very quickly with moderately complex logic. So wouldn’t it be nice to have some language feature that could do the work of replication of code for us? Well it happens that C++ supports such feature, infamously known as Templates.</p>

<h2 id="templates-101">Templates 101</h2>

<p>Consider these three definitions of <code>max</code></p>

<pre><code class="language-cpp">int max(int a, int b)
{
    return a &amp;gt; b ? a : b;
}

double max( double a, double b)
{
    return a &amp;gt; b ? a : b;
}

float max( float a, float b)
{
    return a &amp;gt; b ? a : b;
}
</code></pre>

<p>if you observe closely you will notice that all three definitions look similar. So if we try to abstract the structure such that the logic remains same but the types vary then we should be able to write something like this:</p>

<pre><code class="language-cpp">template&lt;class T&gt;
const T&amp; max( const T&amp; a, const T&amp; b)
{
    return a &gt; b ? a : b;
}
</code></pre>

<p>Lets dissect the above code:</p>

<pre><code class="language-cpp">template&lt;class T&gt;
</code></pre>

<p>This statement defines the Template Function, in our case it is function but it can be a class as well, that is being parametrized with a single type <code>T</code>. <code>T</code> will be replaced by required type, we will get into this a bit later.</p>

<pre><code class="language-cpp">const T&amp; max( const T&amp; a, const T&amp; b)
{
    return a &gt; b ? a : b;
}
</code></pre>

<p>Here the function <code>max</code> takes in two arguments <code>a</code> and <code>b</code> and returns the one that is greater of the two. The type of these arguments is <code>T</code>, as in <code>template&lt;class T&gt;</code> above.</p>

<p>Ok so we are done with the description and here is the how the compiler generates the code for various types on the fly.</p>

<pre><code class="language-cpp">int main()
{
    int first = 9;
    int second = 10;
    int larger = max(first, second);
    return 0;
}
</code></pre>

<p>Here compiler see that function <code>max</code> is being called with two integers, note both the arguments have to be of same type with templates as no implicit type conversion happens like <code>int</code> –&gt; <code>double</code>, so compiler can successfully deduce that we want the <code>max</code> function definition for an <code>int</code>. Compiler creates a new copy of the template code and replaces <code>T</code> with <code>int</code>.</p>

<p>This act of creating functions (and classes as well) on the fly from Template Definitions is called Template Instantiation. Template Instantiation is two step process:</p>

<ol>
<li>Compiler checks Template Definition for syntatic inconsistencies, in our case the Templated Parameter <code>T</code> is being compared (<code>operator &gt;</code> ), here compiler assumes that the type <code>T</code>, can be user defined type as well, defines <code>operator &gt;</code></li>
<li>Once the compiler finds that the Template Definition is syntactically consistent, then in second step it checks for sematic inconsistencies, <code>operator &gt;</code> is a good example here. If we have our own user defined <code>class Comparable</code>, then for it to work with Template Function <code>max</code>, we will have to define <code>operator &gt;</code> for <code>class Comparable</code>. When instantiating Templates compiler creates a copy of the code, hence it needs to see the entire definition. Thus the Templates are usually placed in header files.
<br /></li>
</ol>

<p>Here is the Comparable class:</p>

<pre><code class="language-cpp">class Comparable
{
private:
    int number;
public:
    Comparable(int num) : number(num)
    {}

    bool operator&amp;gt;(const Comparable&amp; other) const
    {
        return this-&amp;gt;number &amp;gt; other.number;
    }
};

    
// And here the Comparable class is being used with Template Function max
    
int main()
{
    Comparable first(9);
    Comparable second(10);
    const Comparable&amp; larger = max(first, second);
    return 0;
}
</code></pre>

<p>Thus you can now use Template Function <code>max</code> with any user defined type, if that type provides <code>operator &gt;</code> for comparison. We have barely scratched the surface about what can be done with C++ Templates, nonetheless it is good beginning. In coming posts I will cover Template classes and various scenarios. I will briefly cover STL (Standard Template Library) and BOOST library.</p>

      </article>

      <ul class="pager blog-pager">
        
        <li class="previous">
          <a href="https://www.variadic.xyz/2011/05/02/static_assert/" data-toggle="tooltip" data-placement="top" title="static_assert">&larr; Previous Post</a>
        </li>
        
        
        <li class="next">
          <a href="https://www.variadic.xyz/2011/05/04/auto/" data-toggle="tooltip" data-placement="top" title="C&#43;&#43;11: auto">Next Post &rarr;</a>
        </li>
        
      </ul>

      

    </div>
  </div>
</div>

      

    </div>

    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          
          <li>
            <a href="https://github.com/sarangbaheti" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		      
		      
          <li>
            <a href="https://linkedin.com/in/sarangbaheti" title="LinkedIn">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
	    	  
          <li>
            <a href="https://stackoverflow.com/users/916549/sarang" title="StackOverflow">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
    		  <li>
      			<a href="https://www.variadic.xyz/index.xml" title="RSS">
      			  <span class="fa-stack fa-lg">
        				<i class="fa fa-circle fa-stack-2x"></i>
        				<i class="fa fa-rss fa-stack-1x fa-inverse"></i>
      			  </span>
      			</a>
    		  </li>		

        </ul>
        <p class="copyright text-muted">
    		  Sarang Baheti
    		  &nbsp;&bull;&nbsp;
    		  2020
    		  
    		  
    		  &nbsp;&bull;&nbsp;
    		  <a href="https://www.variadic.xyz/">a few notes</a>
    		  
  	    </p>
  	        
    		<p class="theme-by text-muted">
    		  Theme by
    		  <a href="https://github.com/sarangbaheti/bh">bh</a>
    		</p>
      </div>
    </div>
  </div>
</footer>

<script src="https://www.variadic.xyz/js/jquery-1.11.2.min.js"></script>
<script src="https://www.variadic.xyz/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
<script src="https://www.variadic.xyz/js/main.js"></script>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-27935503-1', 'auto');
ga('send', 'pageview');
</script>



  </body>
</html>
